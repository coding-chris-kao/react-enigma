(this.webpackJsonpenigma=this.webpackJsonpenigma||[]).push([[0],{28:function(t,e,r){},29:function(t,e,r){},30:function(t,e,r){},32:function(t,e,r){"use strict";r.r(e);var n=r(4),o=r.n(n),i=r(20),a=r.n(i),s=(r(28),r(15)),c=r(18),f=r(6),u=r(36),l=r(35),h=(r(29),r(30),r(1));var g=function(t){var e=t.bulb,r="light-bulb";return e.lightOn&&(r+=" on"),Object(h.jsx)("div",{className:r,children:e.letter})},b=r(21),v=r(22),d=r(23),O=r(7),w=r(8),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(O.a)(this,t),this.enableDebug=e}return Object(w.a)(t,[{key:"debug",value:function(t){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.enableDebug&&(e=console).log.apply(e,[t].concat(n))}}]),t}(),j=[{name:"I",wiring:"EKMFLGDQVZNTOWYHXUSPAIBRCJ"},{name:"II",wiring:"AJDKSIRUXBLHWTMCQGZNPYFVOE"},{name:"III",wiring:"BDFHJLCPRTXVZNYEIWGAKMUSQO"},{name:"IV",wiring:"ESOVPZJAYQUIRHXLNFTGKDCMWB"},{name:"V",wiring:"VZBRGITYUPSDNHLXAWMJQOFECK"},{name:"VI",wiring:"JPGVOUMFYQBENHZRDKASXLICTW"},{name:"VII",wiring:"NZJHGRCXMYSWBOUFAIVLPEKQDT"},{name:"VIII",wiring:"FKQHTLXOCBJSPDZRAMEWNIUYGV"}],m=[{name:"Reflector A",wiring:"EJMZALYXVBWFCRQUONTSPIKHGD"},{name:"Reflector B",wiring:"YRUHQSLDPXNGOKMIEBFZCWVJAT"},{name:"Reflector C",wiring:"FVPJIAOYEDRZXWGCTKUQSBNMHL"}],y=65,I=function(){function t(e){Object(O.a)(this,t),this.wiringMap=void 0,this.wiringMap=new Map;var r,n=y,o=Object(f.a)(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;this.wiringMap.set(String.fromCharCode(n++),i)}}catch(a){o.e(a)}finally{o.f()}}return Object(w.a)(t,[{key:"wireFrom",value:function(t){return this.wiringMap.has(t)?this.wiringMap.get(t):t}}]),t}(),C=function(t){Object(b.a)(r,t);var e=Object(v.a)(r);function r(){return Object(O.a)(this,r),e.apply(this,arguments)}return Object(w.a)(r,[{key:"transfer",value:function(t){return this.has(t)?this.get(t):t}},{key:"setPlugs",value:function(t){var e,r=Object(f.a)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value.split(""),o=Object(c.a)(n,2),i=o[0],a=o[1];this.set(i,a),this.set(a,i)}}catch(s){r.e(s)}finally{r.f()}}}]),r}(Object(d.a)(Map)),k=function(){function t(e,r){Object(O.a)(this,t),this.name=e,this.offset=r,this.wirable=void 0;var n=j.find((function(t){return t.name===e}));if(!n)throw new Error("Rotor constructor: The spec ".concat(e," can not be found"));this.wirable=new I(n.wiring)}return Object(w.a)(t,[{key:"forwardTransfer",value:function(t){if(1!==t.length)throw new Error("Rotor.transfer: Input length must be 1");var e=t.charCodeAt(0);if(e<y&&e>90)return t;var r=(e-y+this.offset)%26,n=String.fromCharCode(y+r);return this.wirable.wireFrom(n)}},{key:"backwardTransfer",value:function(t){if(1!==t.length)throw new Error("Rotor.transfer: Input length must be 1");var e=t.charCodeAt(0);if(e<y&&e>90)return t;var r=(26-(e-y+this.offset)%26)%26,n=String.fromCharCode(y+r);return this.wirable.wireFrom(n)}}]),t}(),T=function(){function t(e){Object(O.a)(this,t),this.name=e,this.wirable=void 0;var r=m.find((function(t){return t.name===e}));if(!r)throw new Error("Rotor constructor: The spec ".concat(e," can not be found"));this.wirable=new I(r.wiring)}return Object(w.a)(t,[{key:"transfer",value:function(t){if(1!==t.length)throw new Error("Reflector.transfer: Input length must be 1");var e=t.charCodeAt(0);return e<y&&e>90?t:this.wirable.wireFrom(t)}}]),t}(),E=new(function(){function t(e){Object(O.a)(this,t),this.rotors=[],this.reflector=void 0,this.plugBoard=new C,this.logger=new p(false),this.setConfig(e),this.logger.debug("Enigma was built.")}return Object(w.a)(t,[{key:"resetConfig",value:function(){this.rotors=[],this.plugBoard.clear()}},{key:"setConfig",value:function(t){this.resetConfig();for(var e=0;e<t.rotorlOrders.length;e++)this.rotors.push(new k(t.rotorlOrders[e],t.rotorPositions[e]));this.reflector=new T(t.reflectorType),this.plugBoard.setPlugs(t.plugs)}},{key:"encrypt",value:function(t){var e=t.toUpperCase();this.logger.debug("Input: ".concat(e)),e=this.plugBoard.transfer(e),this.logger.debug("PlugBoard: ".concat(e));for(var r=0;r<this.rotors.length;r++)e=this.rotors[r].forwardTransfer(e),this.logger.debug("Rotor ".concat(r,": ").concat(e));e=this.reflector.transfer(e),this.logger.debug("Reflector: ".concat(e));for(var n=this.rotors.length-1;n>=0;n--)e=this.rotors[n].backwardTransfer(e),this.logger.debug("Rotor ".concat(n,": ").concat(e));return e=this.plugBoard.transfer(e),this.logger.debug("PlugBoard: ".concat(e)),this.addOneTick(),this.logger.debug("Offset: ",this.rotors.map((function(t){return t.offset}))),e}},{key:"addOneTick",value:function(){var t=!1;this.rotors[0].offset=this.mutateOffset(this.rotors[0].offset,1),0===this.rotors[0].offset&&(t=!0);for(var e=0;e<this.rotors.length;e++)if(0!==e){if(!t)break;this.rotors[e].offset=this.mutateOffset(this.rotors[e].offset,1),t=!1,0===this.rotors[e].offset&&(t=!0)}}},{key:"subtractOneTick",value:function(){var t=!1;this.rotors[0].offset=this.mutateOffset(this.rotors[0].offset,-1),25===this.rotors[0].offset&&(t=!0);for(var e=0;e<this.rotors.length;e++)if(0!==e){if(!t)break;this.rotors[e].offset=this.mutateOffset(this.rotors[e].offset,-1),t=!1,25===this.rotors[e].offset&&(t=!0)}}},{key:"mutateOffset",value:function(t,e){var r=(t+e)%26;return r<0&&(r=26+r),r}}]),t}())({rotorlOrders:["I","II","III"],rotorPositions:[1,2,3],reflectorType:"Reflector A",plugs:["AX","BY","CZ","DU","EF","GH","IK","JL","MP","NO","QW","RT","SV"]});function R(t){var e,r=[],n=Object(f.a)(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push(Object(h.jsx)(g,{bulb:o},o.letter))}}catch(i){n.e(i)}finally{n.f()}return r}function B(t,e,r){var n,o=Object(f.a)(t);try{for(o.s();!(n=o.n()).done;){var i,a=n.value,s=Object(f.a)(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(c.letter===e)return Object.assign(c,{lightOn:r}),t}}catch(u){s.e(u)}finally{s.f()}}}catch(u){o.e(u)}finally{o.f()}return t}var F=new u.a;var M=function(){var t=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]].map((function(t){return t.map((function(t){return{letter:t,lightOn:!1}}))})),e=Object(n.useState)([]),r=Object(c.a)(e,2),o=r[0],i=r[1],a=Object(n.useRef)(t),u=Object(n.useCallback)((function(t){F.next(t)}),[]),g=Object(n.useCallback)((function(t){var e;F.next((null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text"))||"")}),[]);return Object(n.useEffect)((function(){document.addEventListener("keydown",u,!1),document.addEventListener("paste",g,!1);var t=F.pipe(Object(l.a)(10)).subscribe((function(t){if("string"===typeof t){var e,r=t.split(""),n=[],c=Object(f.a)(r);try{for(c.s();!(e=c.n()).done;){var u=e.value,l=E.encrypt(u);B(a.current,l,!0),n.push(l)}}catch(O){c.e(O)}finally{c.f()}i([].concat(Object(s.a)(o),n));for(var h=0,g=n;h<g.length;h++){var b=g[h];B(a.current,b,!1)}}else{if(t.metaKey)return;if(/^\w$/.test(t.key)){var v=E.encrypt(t.key);B(a.current,v,!0),i([].concat(Object(s.a)(o),[v])),B(a.current,v,!1)}else if("Space"===t.code)i([].concat(Object(s.a)(o),[" "]));else if("Backspace"===t.code){if(0===o.length)return;" "!==o[o.length-1]&&E.subtractOneTick();var d=Object(s.a)(o);d.splice(d.length-1,1),i(d)}}}));return function(){document.removeEventListener("keydown",u),document.removeEventListener("paste",g),t.unsubscribe()}}),[o,a,i,u,g]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{children:Object(h.jsx)("img",{src:"enigma-logo.svg",alt:"Enigma"})}),Object(h.jsx)("div",{className:"input-wrapper",children:Object(h.jsx)("input",{type:"text",className:"enigma-input",value:o.join(""),onChange:function(t){return t.preventDefault()}})}),Object(h.jsx)("div",{className:"row",children:R(a.current[0])}),Object(h.jsx)("div",{className:"row",children:R(a.current[1])}),Object(h.jsx)("div",{className:"row",children:R(a.current[2])})]})},P=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,37)).then((function(e){var r=e.getCLS,n=e.getFID,o=e.getFCP,i=e.getLCP,a=e.getTTFB;r(t),n(t),o(t),i(t),a(t)}))};a.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(M,{})}),document.getElementById("root")),P()}},[[32,1,2]]]);
//# sourceMappingURL=main.f79e23c3.chunk.js.map