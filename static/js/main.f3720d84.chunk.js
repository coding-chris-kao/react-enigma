(this.webpackJsonpenigma=this.webpackJsonpenigma||[]).push([[0],{28:function(t,e,r){},29:function(t,e,r){},31:function(t,e,r){},32:function(t,e,r){"use strict";r.r(e);var n=r(4),o=r.n(n),s=r(20),a=r.n(s),i=r(15),c=r(18),f=r(7),u=r(36),l=r(35),h=(r(28),r.p+"static/media/enigma-logo.5cbdba6e.svg"),g=(r(29),r(1));var b=function(t){var e=t.bulb,r="light-bulb";return e.lightOn&&(r+=" on"),Object(g.jsx)("div",{className:r,children:e.letter})},d=r(8),v=r(9),O=r(21),j=r(22),p=r(23),m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(d.a)(this,t),this.enableDebug=e}return Object(v.a)(t,[{key:"debug",value:function(t){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.enableDebug&&(e=console).log.apply(e,[t].concat(n))}}]),t}(),y=65,k=function(t){Object(O.a)(r,t);var e=Object(j.a)(r);function r(){return Object(d.a)(this,r),e.apply(this,arguments)}return Object(v.a)(r,[{key:"transfer",value:function(t){return this.has(t)?this.get(t):t}},{key:"setPlugs",value:function(t){var e,r=Object(f.a)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value.split(""),o=Object(c.a)(n,2),s=o[0],a=o[1];this.set(s,a),this.set(a,s)}}catch(i){r.e(i)}finally{r.f()}}}]),r}(Object(p.a)(Map)),w=function(){function t(e,r){Object(d.a)(this,t),this.no=e,this.offset=r}return Object(v.a)(t,[{key:"forwardTransfer",value:function(t){if(1!==t.length)throw new Error("Rotor.transfer: Input length must be 1");var e=t.charCodeAt(0);if(e<y&&e>90)return t;var r=(e-y+this.offset)%26;return String.fromCharCode(y+r)}},{key:"backwardTransfer",value:function(t){if(1!==t.length)throw new Error("Rotor.transfer: Input length must be 1");var e=t.charCodeAt(0);if(e<y&&e>90)return t;var r=(26-(e-y+this.offset)%26)%26;return String.fromCharCode(y+r)}}]),t}(),C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13;Object(d.a)(this,t),this.offset=e}return Object(v.a)(t,[{key:"transfer",value:function(t){if(1!==t.length)throw new Error("Reflector.transfer: Input length must be 1");var e=t.charCodeAt(0);return e<y&&e>90?t:String.fromCharCode(y+(e-y+this.offset)%26)}}]),t}(),x=function(){function t(){Object(d.a)(this,t),this.rotors=[],this.reflector=new C,this.plugBoard=new k,this.logger=new m(false),this.logger.debug("Enigma was built.")}return Object(v.a)(t,[{key:"resetConfig",value:function(){this.rotors=[],this.plugBoard.clear()}},{key:"setConfig",value:function(t){this.resetConfig();for(var e=0;e<t.rotorlOrders.length;e++)this.rotors.push(new w(t.rotorlOrders[e],t.rotorPositions[e]));this.plugBoard.setPlugs(t.plugs)}},{key:"encrypt",value:function(t){var e=t.toUpperCase();this.logger.debug("Input: ".concat(e)),e=this.plugBoard.transfer(e),this.logger.debug("PlugBoard: ".concat(e));for(var r=0;r<this.rotors.length;r++)e=this.rotors[r].forwardTransfer(e),this.logger.debug("Rotor ".concat(r,": ").concat(e));e=this.reflector.transfer(e),this.logger.debug("Reflector: ".concat(e));for(var n=this.rotors.length-1;n>=0;n--)e=this.rotors[n].backwardTransfer(e),this.logger.debug("Rotor ".concat(n,": ").concat(e));return e=this.plugBoard.transfer(e),this.logger.debug("PlugBoard: ".concat(e)),this.addOneTick(),this.logger.debug("Offset: ",this.rotors.map((function(t){return t.offset}))),e}},{key:"addOneTick",value:function(){var t=!1;this.rotors[0].offset=this.mutateOffset(this.rotors[0].offset,1),0===this.rotors[0].offset&&(t=!0);for(var e=0;e<this.rotors.length;e++)if(0!==e){if(!t)break;this.rotors[e].offset=this.mutateOffset(this.rotors[e].offset,1),t=!1,0===this.rotors[e].offset&&(t=!0)}}},{key:"subtractOneTick",value:function(){var t=!1;this.rotors[0].offset=this.mutateOffset(this.rotors[0].offset,-1),25===this.rotors[0].offset&&(t=!0);for(var e=0;e<this.rotors.length;e++)if(0!==e){if(!t)break;this.rotors[e].offset=this.mutateOffset(this.rotors[e].offset,-1),t=!1,25===this.rotors[e].offset&&(t=!0)}}},{key:"mutateOffset",value:function(t,e){var r=(t+e)%26;return r<0&&(r=26+r),r}}]),t}(),I=new x;function E(t){var e,r=[],n=Object(f.a)(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push(Object(g.jsx)(b,{bulb:o},o.letter))}}catch(s){n.e(s)}finally{n.f()}return r}function B(t,e,r){var n,o=Object(f.a)(t);try{for(o.s();!(n=o.n()).done;){var s,a=n.value,i=Object(f.a)(a);try{for(i.s();!(s=i.n()).done;){var c=s.value;if(c.letter===e)return Object.assign(c,{lightOn:r}),t}}catch(u){i.e(u)}finally{i.f()}}}catch(u){o.e(u)}finally{o.f()}return t}I.setConfig({rotorlOrders:["I","II","III"],rotorPositions:[1,2,3],plugs:["AX","BY","CZ","DU","EF","GH","IK","JL","MP","NO","QW","RT","SV"]});var T=new u.a;var P=function(){var t=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Z","X","C","V","B","N","M"]].map((function(t){return t.map((function(t){return{letter:t,lightOn:!1}}))})),e=Object(n.useState)([]),r=Object(c.a)(e,2),o=r[0],s=r[1],a=Object(n.useRef)(t),u=Object(n.useCallback)((function(t){T.next(t)}),[]),b=Object(n.useCallback)((function(t){var e;T.next((null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text"))||"")}),[]);return Object(n.useEffect)((function(){document.addEventListener("keydown",u,!1),document.addEventListener("paste",b,!1);var t=T.pipe(Object(l.a)(10)).subscribe((function(t){if("string"===typeof t){var e,r=t.split(""),n=[],c=Object(f.a)(r);try{for(c.s();!(e=c.n()).done;){var u=e.value,l=I.encrypt(u);B(a.current,l,!0),n.push(l)}}catch(O){c.e(O)}finally{c.f()}s([].concat(Object(i.a)(o),n));for(var h=0,g=n;h<g.length;h++){var b=g[h];B(a.current,b,!1)}}else{if(t.metaKey)return;if(/^\w$/.test(t.key)){var d=I.encrypt(t.key);B(a.current,d,!0),s([].concat(Object(i.a)(o),[d])),B(a.current,d,!1)}else if("Space"===t.code)s([].concat(Object(i.a)(o),[" "]));else if("Backspace"===t.code){if(0===o.length)return;" "!==o[o.length-1]&&I.subtractOneTick();var v=Object(i.a)(o);v.splice(v.length-1,1),s(v)}}}));return function(){document.removeEventListener("keydown",u),document.removeEventListener("paste",b),t.unsubscribe()}}),[o,a,s,u,b]),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("header",{children:Object(g.jsx)("img",{src:h,alt:"Enigma"})}),Object(g.jsx)("div",{className:"input-wrapper",children:Object(g.jsx)("input",{type:"text",className:"enigma-input",value:o.join(""),onChange:function(t){return t.preventDefault()}})}),Object(g.jsx)("div",{className:"row",children:E(a.current[0])}),Object(g.jsx)("div",{className:"row",children:E(a.current[1])}),Object(g.jsx)("div",{className:"row",children:E(a.current[2])})]})},N=(r(31),function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,37)).then((function(e){var r=e.getCLS,n=e.getFID,o=e.getFCP,s=e.getLCP,a=e.getTTFB;r(t),n(t),o(t),s(t),a(t)}))});a.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(P,{})}),document.getElementById("root")),N()}},[[32,1,2]]]);
//# sourceMappingURL=main.f3720d84.chunk.js.map