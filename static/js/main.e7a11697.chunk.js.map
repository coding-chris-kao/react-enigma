{"version":3,"sources":["components/LightBulb.tsx","utils/logger.ts","enigma/enigma.specification.ts","enigma/enigma.ts","App.tsx","enigma/enigma.config.ts","reportWebVitals.ts","index.tsx"],"names":["LightBulb","props","bulb","className","lightOn","letter","Logger","enableDebug","text","args","this","console","log","rotorSpecs","name","wiring","reflectorSpecs","START_CODE","Wirable","wiringMap","Map","index","set","String","fromCharCode","input","has","get","PlugBoard","plugs","split","p1","p2","Rotor","offset","wirable","spec","find","Error","length","charCode","charCodeAt","outcomePosition","wireFrom","backwardPosition","Reflector","enigma","config","rotors","reflector","plugBoard","logger","setConfig","debug","clear","resetConfig","i","rotorlOrders","push","rotorPositions","reflectorType","setPlugs","curValue","toUpperCase","transfer","forwardTransfer","backwardTransfer","addOneTick","map","r","carry","mutateOffset","value","temp","LightBulbRow","bulbs","results","setLightBulbStatus","lightBulbs","row","Object","assign","encrypt$","Subject","App","defaultLightBulbs","useState","chars","setChars","useRef","handleKeyDown","useCallback","e","next","handlePaste","clipboardData","getData","useEffect","document","addEventListener","encryptSubscription","pipe","debounceTime","subscribe","letters","outputs","output","encrypt","current","metaKey","test","key","code","subtractOneTick","clone","splice","removeEventListener","unsubscribe","src","alt","type","join","onChange","preventDefault","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e7a11697.chunk.js","sourcesContent":["import './light-bulb.scss'\n\ninterface Props {\n  bulb: LightBulbStatus\n}\n\nexport interface LightBulbStatus {\n  letter: string\n  lightOn: boolean\n}\n\nfunction LightBulb(props: Props) {\n  const { bulb } = props\n\n  let className = 'light-bulb'\n  if (bulb.lightOn) className += ' on'\n\n  return <div className={className}>{bulb.letter}</div>\n}\n\nexport default LightBulb\n","export class Logger {\n  constructor(public enableDebug: boolean = false) {}\n\n  public debug(text: string, ...args: any[]) {\n    if (this.enableDebug) console.log(text, ...args)\n  }\n}\n","export const rotorSpecs = [\n  { name: 'I', wiring: 'EKMFLGDQVZNTOWYHXUSPAIBRCJ' },\n  { name: 'II', wiring: 'AJDKSIRUXBLHWTMCQGZNPYFVOE' },\n  { name: 'III', wiring: 'BDFHJLCPRTXVZNYEIWGAKMUSQO' },\n  { name: 'IV', wiring: 'ESOVPZJAYQUIRHXLNFTGKDCMWB' },\n  { name: 'V', wiring: 'VZBRGITYUPSDNHLXAWMJQOFECK' },\n  { name: 'VI', wiring: 'JPGVOUMFYQBENHZRDKASXLICTW' },\n  { name: 'VII', wiring: 'NZJHGRCXMYSWBOUFAIVLPEKQDT' },\n  { name: 'VIII', wiring: 'FKQHTLXOCBJSPDZRAMEWNIUYGV' },\n]\n\nexport const reflectorSpecs = [\n  { name: 'Reflector A', wiring: 'EJMZALYXVBWFCRQUONTSPIKHGD' },\n  { name: 'Reflector B', wiring: 'YRUHQSLDPXNGOKMIEBFZCWVJAT' },\n  { name: 'Reflector C', wiring: 'FVPJIAOYEDRZXWGCTKUQSBNMHL' },\n]\n","import { Logger } from '../utils/logger'\nimport { reflectorSpecs, rotorSpecs } from './enigma.specification'\n\nconst DEBUG_MODE = false\nconst START_CODE = 65\nconst END_CODE = 90\n\nexport interface EnigmnaConfig {\n  rotorlOrders: string[]\n  rotorPositions: number[]\n  reflectorType: string\n  plugs: string[]\n}\n\nexport class Wirable {\n  public wiringMap: Map<string, string>\n\n  constructor(wiring: string) {\n    this.wiringMap = new Map<string, string>()\n\n    let index = START_CODE\n    for (let letter of wiring) {\n      this.wiringMap.set(String.fromCharCode(index++), letter)\n    }\n  }\n\n  public wireFrom(input: string): string {\n    return this.wiringMap.has(input) ? this.wiringMap.get(input)! : input\n  }\n}\n\nexport class PlugBoard extends Map {\n  public transfer(input: string) {\n    if (!this.has(input)) return input\n    return this.get(input)\n  }\n\n  public setPlugs(plugs: string[]) {\n    for (let plug of plugs) {\n      const [p1, p2] = plug.split('')\n      this.set(p1, p2)\n      this.set(p2, p1)\n    }\n  }\n}\n\nexport class Rotor {\n  public wirable: Wirable\n\n  constructor(public name: string, public offset: number) {\n    let spec = rotorSpecs.find((spec) => spec.name === name)\n    if (!spec) {\n      throw new Error(`Rotor constructor: The spec ${name} can not be found`)\n    }\n    this.wirable = new Wirable(spec.wiring)\n  }\n\n  public forwardTransfer(input: string): string {\n    if (input.length !== 1)\n      throw new Error('Rotor.transfer: Input length must be 1')\n\n    let charCode = input.charCodeAt(0)\n    if (charCode < START_CODE && charCode > END_CODE) return input\n\n    const outcomePosition = (charCode - START_CODE + this.offset) % 26\n    const letter = String.fromCharCode(START_CODE + outcomePosition)\n    return this.wirable.wireFrom(letter)\n  }\n\n  public backwardTransfer(input: string): string {\n    if (input.length !== 1)\n      throw new Error('Rotor.transfer: Input length must be 1')\n\n    let charCode = input.charCodeAt(0)\n    if (charCode < START_CODE && charCode > END_CODE) return input\n\n    const outcomePosition = (charCode - START_CODE + this.offset) % 26\n    const backwardPosition = (26 - outcomePosition) % 26\n    const letter = String.fromCharCode(START_CODE + backwardPosition)\n    return this.wirable.wireFrom(letter)\n  }\n}\n\nexport class Reflector {\n  public wirable: Wirable\n\n  constructor(public name: string) {\n    let spec = reflectorSpecs.find((spec) => spec.name === name)\n    if (!spec) {\n      throw new Error(`Rotor constructor: The spec ${name} can not be found`)\n    }\n    this.wirable = new Wirable(spec.wiring)\n  }\n\n  public transfer(input: string) {\n    if (input.length !== 1)\n      throw new Error('Reflector.transfer: Input length must be 1')\n\n    let charCode = input.charCodeAt(0)\n    if (charCode < START_CODE && charCode > END_CODE) return input\n\n    return this.wirable.wireFrom(input)\n  }\n}\n\nexport class Enigma {\n  private rotors: Rotor[] = []\n  private reflector!: Reflector\n  private plugBoard: PlugBoard = new PlugBoard()\n  private logger: Logger = new Logger(DEBUG_MODE)\n\n  constructor(config: EnigmnaConfig) {\n    this.setConfig(config)\n    this.logger.debug('Enigma was built.')\n  }\n\n  public resetConfig() {\n    this.rotors = []\n    this.plugBoard.clear()\n  }\n\n  public setConfig(config: EnigmnaConfig) {\n    this.resetConfig()\n\n    // Set rotors\n    for (let i = 0; i < config.rotorlOrders.length; i++) {\n      this.rotors.push(\n        new Rotor(config.rotorlOrders[i], config.rotorPositions[i])\n      )\n    }\n\n    // Set Reflector\n    this.reflector = new Reflector(config.reflectorType)\n\n    // Set plug board\n    this.plugBoard.setPlugs(config.plugs)\n  }\n\n  public encrypt(input: string) {\n    let curValue = input.toUpperCase()\n    this.logger.debug(`Input: ${curValue}`)\n\n    // Encrypt forward\n    curValue = this.plugBoard.transfer(curValue)\n    this.logger.debug(`PlugBoard: ${curValue}`)\n\n    for (let i = 0; i < this.rotors.length; i++) {\n      curValue = this.rotors[i].forwardTransfer(curValue)\n      this.logger.debug(`Rotor ${i}: ${curValue}`)\n    }\n\n    // Encrypt with reflector\n    curValue = this.reflector.transfer(curValue)\n    this.logger.debug(`Reflector: ${curValue}`)\n\n    // Encrypt backward\n    for (let i = this.rotors.length - 1; i >= 0; i--) {\n      curValue = this.rotors[i].backwardTransfer(curValue)\n      this.logger.debug(`Rotor ${i}: ${curValue}`)\n    }\n\n    curValue = this.plugBoard.transfer(curValue)\n    this.logger.debug(`PlugBoard: ${curValue}`)\n\n    // Add one tick\n    this.addOneTick()\n    this.logger.debug(\n      'Offset: ',\n      this.rotors.map((r) => r.offset)\n    )\n\n    return curValue\n  }\n\n  public addOneTick() {\n    let carry = false\n    this.rotors[0].offset = this.mutateOffset(this.rotors[0].offset, 1)\n    if (this.rotors[0].offset === 0) carry = true\n\n    for (let i = 0; i < this.rotors.length; i++) {\n      if (i === 0) continue\n      if (!carry) break\n      this.rotors[i].offset = this.mutateOffset(this.rotors[i].offset, 1)\n      carry = false\n      if (this.rotors[i].offset === 0) carry = true\n    }\n  }\n\n  public subtractOneTick() {\n    let carry = false\n    this.rotors[0].offset = this.mutateOffset(this.rotors[0].offset, -1)\n    if (this.rotors[0].offset === 25) carry = true\n\n    for (let i = 0; i < this.rotors.length; i++) {\n      if (i === 0) continue\n      if (!carry) break\n      this.rotors[i].offset = this.mutateOffset(this.rotors[i].offset, -1)\n      carry = false\n      if (this.rotors[i].offset === 25) carry = true\n    }\n  }\n\n  /**\n   * To make sure the offset must in the boundary [0, 26)\n   * @param offset The offset before mutated\n   * @param value The value to mutate offset\n   * @returns New offset which is greater than 0 and less than 26\n   */\n  private mutateOffset(offset: number, value: number) {\n    let temp = (offset + value) % 26\n    if (temp < 0) {\n      temp = 26 + temp\n    }\n    return temp\n  }\n}\n","import { useCallback, useEffect, useRef, useState } from 'react'\nimport { Subject } from 'rxjs'\nimport { debounceTime } from 'rxjs/operators'\nimport './App.scss'\nimport LightBulb, { LightBulbStatus } from './components/LightBulb'\nimport { Enigma } from './enigma/enigma'\nimport { config } from './enigma/enigma.config'\n\nconst enigma = new Enigma(config)\n\nfunction createLightBulbs(): LightBulbStatus[][] {\n  const LIGHT_BULBS = [\n    ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],\n    ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],\n    ['Z', 'X', 'C', 'V', 'B', 'N', 'M'],\n  ]\n  return LIGHT_BULBS.map((row) =>\n    row.map((letter) => ({ letter, lightOn: false } as LightBulbStatus))\n  )\n}\n\nfunction LightBulbRow(bulbs: LightBulbStatus[]) {\n  const results = []\n\n  for (let bulb of bulbs) {\n    results.push(<LightBulb key={bulb.letter} bulb={bulb} />)\n  }\n\n  return results\n}\n\nfunction setLightBulbStatus(\n  lightBulbs: LightBulbStatus[][],\n  letter: string,\n  lightOn: boolean\n) {\n  for (let row of lightBulbs) {\n    for (let bulb of row) {\n      if (bulb.letter === letter) {\n        Object.assign(bulb, { lightOn })\n        return lightBulbs\n      }\n    }\n  }\n  return lightBulbs\n}\n\nconst encrypt$ = new Subject<KeyboardEvent | string>()\n\nfunction App() {\n  const defaultLightBulbs = createLightBulbs()\n  const [chars, setChars] = useState([] as string[])\n  const lightBulbs = useRef(defaultLightBulbs)\n\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    encrypt$.next(e)\n  }, [])\n\n  const handlePaste = useCallback((e: ClipboardEvent) => {\n    encrypt$.next(e.clipboardData?.getData('text') || '')\n  }, [])\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown, false)\n    document.addEventListener('paste', handlePaste, false)\n\n    const encryptSubscription = encrypt$\n      .pipe(debounceTime(10))\n      .subscribe((e: KeyboardEvent | string) => {\n        if (typeof e === 'string') {\n          const letters = e.split('')\n          const outputs = []\n          for (let letter of letters) {\n            const output = enigma.encrypt(letter)\n            setLightBulbStatus(lightBulbs.current, output, true)\n            outputs.push(output)\n          }\n          setChars([...chars, ...outputs])\n          for (let output of outputs) {\n            setLightBulbStatus(lightBulbs.current, output, false)\n          }\n        } else if (e.metaKey) {\n          return\n        } else if (/^\\w$/.test(e.key)) {\n          const output = enigma.encrypt(e.key)\n          setLightBulbStatus(lightBulbs.current, output, true)\n          setChars([...chars, output])\n          setLightBulbStatus(lightBulbs.current, output, false)\n        } else if (e.code === 'Space') {\n          setChars([...chars, ' '])\n        } else if (e.code === 'Backspace') {\n          if (chars.length === 0) return\n          if (chars[chars.length - 1] !== ' ') {\n            enigma.subtractOneTick()\n          }\n          const clone = [...chars]\n          clone.splice(clone.length - 1, 1)\n          setChars(clone)\n        }\n      })\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown)\n      document.removeEventListener('paste', handlePaste)\n      encryptSubscription.unsubscribe()\n    }\n  }, [chars, lightBulbs, setChars, handleKeyDown, handlePaste])\n\n  return (\n    <div className=\"App\">\n      <header>\n        <img src=\"react-enigma/enigma-logo.svg\" alt=\"Enigma\" />\n      </header>\n\n      <div className=\"input-wrapper\">\n        <input\n          type=\"text\"\n          className=\"enigma-input\"\n          value={chars.join('')}\n          onChange={(e) => e.preventDefault()}\n        />\n      </div>\n\n      <div className=\"row\">{LightBulbRow(lightBulbs.current[0])}</div>\n      <div className=\"row\">{LightBulbRow(lightBulbs.current[1])}</div>\n      <div className=\"row\">{LightBulbRow(lightBulbs.current[2])}</div>\n    </div>\n  )\n}\n\nexport default App\n","import { EnigmnaConfig } from './enigma'\n\nexport const config: EnigmnaConfig = {\n  rotorlOrders: ['I', 'II', 'III'],\n  rotorPositions: [1, 2, 3],\n  reflectorType: 'Reflector A',\n  plugs: [\n    'AX',\n    'BY',\n    'CZ',\n    'DU',\n    'EF',\n    'GH',\n    'IK',\n    'JL',\n    'MP',\n    'NO',\n    'QW',\n    'RT',\n    'SV',\n  ],\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}